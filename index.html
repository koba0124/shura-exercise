<html>
    <head>
        <script src="./pdfjs-dist/build/pdf.js"></script>
        <script>
            var pdfjsLib = window['pdfjs-dist/build/pdf'];
            async function uploadPdf(e) {
                // PDFファイルデータをArrayBuffer型で取得
                const fileData = await readFileAsync(e.files[0])

                // PDFファイルのパース
                const pdf = await pdfjsLib.getDocument({
                    data: fileData,
                    cMapUrl: './pdfjs-dist/web/cmaps/',
                    cMapPacked: true,
                })
                alert(pdf);
            };
            function readFileAsync(file) {
            return new Promise((resolve, reject) => {
                    const reader = new FileReader()
                    reader.onload = () => {
                    resolve(reader.result)
                    }
                    reader.onerror = reject
                    reader.readAsArrayBuffer(file)
                })
            };
        </script>
    </head>
    <body>
        <input type="file" accept="application/pdf" onchange="uploadPdf(this)">
        <canvas ref="canvas" />
    </body>
</html>
